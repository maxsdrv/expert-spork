variables:
  STATIC_CHECKS_IMAGE: ${CI_REGISTRY}/mpk/ci/static-check-image:latest
  CI_PATH: "${CI_PROJECT_DIR}/ci"

spell-check/mr:
  variables:
    GIT_STRATEGY: clone
    GIT_SUBMODULE_STRATEGY: none
  stage: analysis
  image: $STATIC_CHECKS_IMAGE
  script:
    - git submodule update --init ${CI_PATH}
    - ${CI_PATH}/scripts/run_cspell.sh
  only:
    refs:
      - merge_requests

code-format/mr:
  variables:
    GIT_STRATEGY: clone
    GIT_SUBMODULE_STRATEGY: none
  stage: analysis
  image: $STATIC_CHECKS_IMAGE
  script:
    - git submodule update --init ${CI_PATH}
    - ${CI_PATH}/scripts/run_clang-format.sh
  only:
    refs:
      - merge_requests

cmake-format/mr:
  variables:
    GIT_STRATEGY: clone
    GIT_SUBMODULE_STRATEGY: none
  stage: analysis
  image: $STATIC_CHECKS_IMAGE
  script:
    - git submodule update --init ${CI_PATH}
    - ${CI_PATH}/scripts/run_cmake-format.sh
  only:
    refs:
      - merge_requests
