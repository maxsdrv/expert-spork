version: v2beta1

commands:
  tests: |-
    CI_SERVER_HOST= devspace --silent run ensure-py-deps tests
    pdm run -p tests pytest -rpf "$@"

  tests_update_models: |-
    export CI_SERVER_HOST=
    devspace --silent run gen_py_openapi_models \
      api/control-openapi.yaml \
      tests/integration/models/http_api.py \
      "DDS Control"
